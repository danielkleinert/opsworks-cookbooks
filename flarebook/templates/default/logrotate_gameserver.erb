<% @log_dirs.each do |dir| %><%= dir %>/*.log <% end %> {
        daily
        missingok
        rotate <%= node[:logrotate][:rotate] %>
        compress
        delaycompress
        <% if node[:logrotate][:dateformat] -%>
        dateext
        dateformat <%= node[:logrotate][:dateformat] %>
        <% end -%>
        notifempty
        copytruncate
        sharedscripts

        post-rotate
          restart rsyslog >/dev/null 2>&1 || true
        endscript
}